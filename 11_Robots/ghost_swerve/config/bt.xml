<?xml version="1.0" encoding="UTF-8"?>
<root BTCPP_format="4"
      main_tree_to_execute="main">
  <BehaviorTree ID="main">
    <Sequence>
      <SwipeTail num_swipes="5"/>
      <MoveToPose posX="0.33"
                  posY="0.33"
                  theta="45"
                  threshold="0.025"
                  timeout="5000"/>
      <MoveToPose posX="0.45"
                  posY="0.15"
                  theta="0"
                  threshold="0.025"
                  timeout="10000"/>
      <ReactiveSequence>
        <SetWing state="true"/>
        <MoveToPose posX="0.9"
                    posY="0.15"
                    theta="0"
                    threshold="0.025"
                    timeout="10000"/>
      </ReactiveSequence>
      <ReactiveSequence>
        <SetWing state="true"/>
        <MoveToPose posX="2.95"
                    posY="0.25"
                    theta="0"
                    threshold="0.025"
                    timeout="10000"/>
      </ReactiveSequence>
      <ReactiveSequence>
        <SetWing state="true"/>
        <MoveToPose posX="3.05"
                    posY="0.25"
                    theta="45"
                    threshold="0.025"
                    timeout="10000"/>
      </ReactiveSequence>
      <ReactiveSequence>
        <SetWing state="true"/>
        <MoveToPose posX="3.20"
                    posY="1.2"
                    theta="90"
                    threshold="0.025"
                    timeout="10000"/>
      </ReactiveSequence>
      <Logging message="Done"/>
      <KeepRunningUntilFailure>
        <CheckForRestart/>
      </KeepRunningUntilFailure>
    </Sequence>
  </BehaviorTree>

  <BehaviorTree ID="tailTest">
    <Sequence>
      <SwipeTail num_swipes="5"/>
      <!-- <MoveToPose posX="0"
                  posY="1"
                  theta="0"
                  threshold="0.025"
                  timeout="5000"/> -->
      <KeepRunningUntilFailure>
        <CheckForRestart/>
      </KeepRunningUntilFailure>
    </Sequence>
  </BehaviorTree>

  <!-- Description of Node Models (used by Groot) -->
  <TreeNodesModel>
    <Action ID="CheckForRestart"
            editable="true"/>
    <Action ID="MoveToPose"
            editable="true">
      <input_port name="posX">m</input_port>
      <input_port name="posY">m</input_port>
      <input_port name="theta">deg</input_port>
      <input_port name="threshold"
                  default="0.025">m</input_port>
      <input_port name="timeout"
                  default="5000">ms</input_port>
    </Action>
    <Action ID="SetWing"
            editable="true">
      <input_port name="state"/>
    </Action>
    <Action ID="SwipeTail"
            editable="true">
      <input_port name="num_swipes"/>
    </Action>
  </TreeNodesModel>

</root>
